---
title: "Your Mac Has a Secret UI API (And Homerow Exploits It Beautifully)"
description: "Homerow lets you click anything on screen with your keyboard. Under the hood, it's exploiting the same macOS Accessibility API that powers screen readers — and the architecture is genuinely clever."
date: 2026-02-10
tags:
  - programming
  - macos
  - tools
  - til
draft: false
author: "Brenna"
---

I have a confession. I spent $50 on a macOS app that lets me avoid using my mouse. And I'd do it again.

[Homerow](https://www.homerow.app/) is one of those tools where the pitch sounds underwhelming — "click things with your keyboard" — but the reality rewires how you use your computer. You hit a shortcut, type a few letters, and suddenly you've clicked a button that would've required a 400-pixel mouse journey across two monitors. It's [Vimium](https://vimium.github.io/) for your entire operating system.

But I'm not here to sell you on Homerow. I'm here because I fell down a rabbit hole trying to understand *how it works*, and what I found was way more interesting than I expected. It turns out your Mac has a full tree of every UI element on screen, exposed through a public API, and Homerow is basically a really elegant tree-walker with a floating window on top.

## The Accessibility Tree: Your Mac's Hidden DOM

Every macOS app exposes a tree of UI elements through the [Accessibility API](https://developer.apple.com/documentation/applicationservices/axuielement). If you've worked with web development, think of it as the DOM, but for your entire operating system. Every button, every text field, every menu item — they're all nodes in a tree.

```
Application (AXApplication)
├── Window (AXWindow)
│   ├── Toolbar (AXToolbar)
│   │   ├── Button "Back" (AXButton)
│   │   ├── Button "Forward" (AXButton)
│   │   └── TextField "URL" (AXTextField)
│   ├── ScrollArea (AXScrollArea)
│   │   ├── Link "Home" (AXLink)
│   │   ├── Button "Submit" (AXButton)
│   │   └── StaticText "Hello" (AXStaticText)
│   ...
```

This isn't some reverse-engineered hack. It's an official Apple framework that's been around since the early days of macOS. It exists so screen readers like VoiceOver can navigate apps for visually impaired users. Every standard AppKit or SwiftUI component automatically generates its accessibility tree node. Native apps get this for free.

Homerow just... asks the tree what's there.

## Three Layers of Clever

Homerow's architecture (which we can study through its open-source predecessor [Vimac](https://github.com/nchudleigh/vimac)) breaks down into three layers, and each one is doing something interesting.

### Layer 1: Discovery — "What can I click?"

When you activate Homerow, it needs to find every clickable thing on screen, fast. Here's the algorithm:

1. Get the frontmost app via `NSWorkspace.shared.frontmostApplication`
2. Create a root accessibility reference: `AXUIElementCreateApplication(pid)`
3. Recursively traverse the tree by reading each element's `kAXChildrenAttribute`

For each element, it reads three things in a single batch call — role (button? link? checkbox?), position (screen coordinates), and size (width and height). Plus it checks what *actions* the element supports.

That last part is the key insight. **An element gets a hint if and only if it has actions.** A button supports `AXPress` — it gets a hint. A static text label has no actions — no hint. A checkbox supports `AXPress` — hint. Homerow isn't guessing what's clickable based on appearance. It's asking the element itself: "hey, can you *do* anything?"

There's a nice optimization for tables too. Instead of crawling every row (imagine a 10,000-row spreadsheet), it reads `kAXVisibleRowsAttribute` — only the rows you can actually see. No point labeling something you can't reach.

Different parts of the screen get different query services. The main window content, the menu bar, the system tray icons, the notification center — each has its own traversal strategy. Electron apps and WebViews get special treatment because their accessibility trees are structured differently than native apps.

### Layer 2: The Overlay — "Here are your options"

Once Homerow has a list of hintable elements with screen positions, it creates a transparent `NSWindow` floating above everything and draws hint labels at each element's coordinates.

The hint generation algorithm is where the name comes from. It picks from the home row keys — the ones your fingers naturally rest on (a, s, d, f, j, k, l). If there are only a few elements on screen, you get single-character hints: just "a", "s", "d". More elements? Two-character combos: "ka", "jf", "sd". The algorithm minimizes keystrokes while keeping labels unique.

As you type, hints that don't match disappear in real-time. Type "k" and suddenly you're only looking at the handful of hints starting with "k". It feels instant.

### Layer 3: The Click — "Make it happen"

You've typed your hint. Now Homerow needs to actually click the thing. It has two mechanisms, and which one it uses matters.

**Primary: the polite way.** It calls `AXUIElementPerformAction(element, kAXPressAction)`, which tells the accessibility system to trigger the element's native action. The app receiving the click processes it the same way it would any accessibility interaction. Clean, proper, no side effects.

**Fallback: the brute force way.** When `AXPerformAction` doesn't work (and for some elements, it doesn't), Homerow creates synthetic mouse events:

```swift
CGEventCreateMouseEvent(source, .leftMouseDown, position, .left)
CGEventCreateMouseEvent(source, .leftMouseUp, position, .left)
CGEventPost(.cghidEventTap, event)
```

This is literally faking a mouse click at the element's screen coordinates and injecting it into the system event stream. The app thinks a mouse was there. It wasn't. Homerow is the Cyrano de Bergerac of UI interaction.

Right-clicks (Shift+Enter) and Cmd-clicks (Cmd+Enter) work the same way — synthetic events with the appropriate modifier flags set.

## Why That Accessibility Permission Matters

You know that dialog: "Homerow would like to control this computer using accessibility features"? Here's what happens without it:

- `AXUIElementCreateApplication()` returns an opaque reference you can't query — like getting a library card to a library with no books
- `AXUIElementCopyAttributeValue()` fails with `kAXErrorAPIDisabled`
- `CGEventPost()` for synthetic clicks gets blocked entirely

This is macOS protecting you from apps silently reading your screen or clicking things without your knowledge. Granting Accessibility permission is you saying "yes, I trust this app to see and interact with my UI." It's the same permission that screen readers, automation tools, and window managers need.

It's also the same permission that [malicious software would love to have](https://objective-see.org/blog/blog_0x49.html), which is why macOS makes it an explicit, manual toggle rather than something apps can request programmatically. You have to physically go into System Settings and flip the switch.

## Why Some Apps Are Invisible

If you've used Homerow, you've hit this: you activate it in some app and... nothing. No hints. Or a few hints that don't cover what you actually need. Here's why:

| App Type | Accessibility Tree Quality |
|----------|---------------------------|
| **Native macOS** (AppKit/SwiftUI) | Excellent — the framework generates the tree automatically |
| **Electron / web apps** | Partial — Chrome exposes a tree, but it's often less complete |
| **Custom-rendered** (games, Flutter, some Java apps) | Poor or none — they draw pixels directly, no UI components to discover |
| **Catalyst** (iPad apps on Mac) | Depends on how well the iOS accessibility was implemented |

This is the fundamental limitation. The accessibility tree is only as good as what the app puts in it. A native SwiftUI app with standard buttons and text fields? Perfect tree, every element discoverable. A game that renders everything to a single canvas with custom drawing code? Homerow sees one big opaque rectangle. Nothing to click.

Electron apps are the interesting middle ground. Chrome *does* expose an accessibility tree for web content, but it's often a weird hybrid where some elements are fully annotated and others are just "generic group containing generic group containing generic group." Homerow maintains explicit support for Chrome, Firefox, Arc, VS Code, Slack, Discord, Notion, Obsidian, and Spotify — all Electron or web-based — but the quality varies.

If you're ever wondering why a specific element isn't showing up, Homerow has a Tutor feature (press `?` while activated) that shows the accessibility properties of whatever you're focused on. It's like the Elements panel in browser devtools, but for your entire OS.

## The Vimac Backstory

Homerow didn't spring from nothing. It's a full rewrite of [Vimac](https://github.com/nchudleigh/vimac), an open-source project by the same developer, Dexter Leng. Vimac was GPL-3.0 and free. Homerow is proprietary and $49.99. [HN had opinions about this](https://news.ycombinator.com/item?id=34964904), as HN does.

The core architecture — AXUIElement traversal, overlay window, hint generation — is the same. But Homerow added one thing that changed the UX completely: a search bar. Vimac was Vimium-style only — labels appear, you type the letters. Homerow lets you type the *name* of the thing you want ("Save", "File", "Submit") and filters to matching elements. Product Hunt called it ["Spotlight for the macOS user interface"](https://www.producthunt.com/products/homerow?launch=homerow) and honestly, that's exactly what it feels like.

Other additions: a Tutor for debugging, better Electron app support, multi-monitor support, improved scroll mode with Tab to switch between scroll areas. And yes, better performance — though "mostly the same, but faster" is how several people described it.

## Why I Think This Is Interesting Beyond Homerow

The accessibility API isn't just for screen readers and keyboard navigation tools. It's a full programmatic interface to your entire UI. Anything an app displays through standard components is queryable, and in many cases, actionable from outside.

[Multi.app](https://multi.app/blog/building-a-macos-remote-control-engine) used the same API to build a remote control engine for screen sharing. Window managers use it to read and manipulate window positions. Automation tools use it to script interactions with apps that don't have their own scripting interface.

And yeah, it's the same API that makes certain security researchers nervous, because anything that can "see everything on screen and click anything" is exactly the kind of capability you'd want if you were building something malicious. Hence the permission gate.

But as an architectural pattern? A tree of every UI element, queryable by type and position, with discoverable actions? That's just a really good API. Homerow is proof that building something elegant on top of it doesn't require reinventing the wheel. Sometimes the best tools are the ones that find the existing infrastructure everyone forgot was there and put a nice interface on it.
